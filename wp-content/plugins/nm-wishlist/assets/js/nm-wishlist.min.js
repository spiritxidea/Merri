/* NM Wishlist */
(function(a){var m={init:function(){var e=!1,k;if(a.cookie){var d=a.cookie("nm-wishlist-items");if(d){var d=JSON.parse(d),g;for(g in d)d.hasOwnProperty(g)&&a("#nm-wishlist-item-"+g+"-button").addClass("added")}}a(document).on("click",".nm-wishlist-button",function(b){b.preventDefault();var c=a(this);b=c.data("product-id");if(e)if(c.hasClass("ajax-running"))e.abort(),e=!1;else return;c.addClass("ajax-running");k=c;var f=a(".nm-wishlist-item-"+b+"-button"),c=f.first().hasClass("added")?1:0;f.toggleClass("added");
e=a.ajax({type:"POST",url:nm_wp_vars.ajaxUrl,data:{action:"nm_wishlist_toggle",remove_item:c,product_id:b},dataType:"json",cache:!1,headers:{"cache-control":"no-cache"},complete:function(){k.removeClass("ajax-running");e=!1},success:function(b){"1"===b.status?(f.attr("title",nm_wishlist_vars.wlButtonTitleRemove),a("body").trigger("wishlist_added_item")):(f.attr("title",nm_wishlist_vars.wlButtonTitleAdd),a("body").trigger("wishlist_removed_item"))}})});var h=a("#nm-wishlist-table");if(h.length){var l=
function(b){b=b.closest("tr");var c=b.data("product-id");a.ajax({type:"POST",url:nm_wp_vars.ajaxUrl,data:{action:"nm_wishlist_toggle",remove_item:1,product_id:c},dataType:"json",cache:!1,headers:{"cache-control":"no-cache"},success:function(b){a("body").trigger("wishlist_removed_item")}});1==h.children("tbody").children("tr").not(".hiding").length&&(a("#nm-wishlist").css("display","none"),a("#nm-wishlist-empty").addClass("show"));b.addClass("hiding").fadeOut(300,function(){a(this).remove()})};h.find(".title .nm-wishlist-remove").bind("click",
function(b){b.preventDefault();b=a(this);b.hasClass("clicked")||(b.addClass("clicked"),l(b))});a(document.body).on("added_to_cart",function(b,a,e,d){l(d)})}}};a(document).ready(function(){m.init()})})(jQuery);